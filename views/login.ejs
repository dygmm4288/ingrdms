<html>
    <head>
        <meta charset = "utf-8" />
        <meta name = "viewport" content = "user-scalable=no, initial-scale = 1.0, width = device-width, minimum-scale = 1.0, maximum-scale = 1.0"/>
        <link rel="stylesheet" type="text/css" href="/css/index.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
        <title>Login Page</title>
    </head>
    <body>
        <div class = "app">
            <header class = "#main_header">
            </header>
            <div class = "content">
                <form action= "/form_receiver" method ="POST">
                    <input type = "text"  size = "25" name ="uid" placeholder = "Enter User ID" required autofocus />
                    <input type = "password" size = "25" name = "upwd" placeholder = "Enter User PassWord" required/>
                <div>
                    <input type = "submit" class = "submitButton" id = "loginButton" value = "로그인"/>
                    <input type = "button" class = "submitButton" id = "skipButton" value = "건너뛰기"/>
                </div>
                </form>
                <div style = "margin-top: 20px">
                        <a href="/findUser">아이디 비밀번호 찾기</a> / 
                        <a href= "/signUp">회원가입</a>
                </div>
            </div>
            <div class = "footer">

            </div>
        </div>
        <script>
            $(document).ready(() => {
                /* Initial */
                $('.app').css('background',`url('../img/login_page.png') center no-repeat`);
                $('.app').css('background-size','90vw 90vh');
                $('.app').css('z-index','-1');
                /* Button */
                $('#skipButton').click(()=>{
                location.href = '/main';
                });
                /* Login Error */
                var err_level = `<%= err_level %>`,
                    append_level = function (level) {
                    if(level === '1') {
                        return `<div style = "text-align:center; color:red; font-weight:bold;">
                        입력한 아이디가 존재하지 않습니다. <br>다시 입력해주시길 바랍니다. </div>`;
                    } else {
                        return `<div style = "text-align:center; color:red; font-weight:bold;">
                        입력한 비밀번호가 옳지 않습니다.<br> 다시 입력해주시길 바랍니다.</div>`;
                }},prepend_element = function(string,jquery) {
                        return jquery.prepend(string);
                }
                if(err_level) {
                    var append = append_level(err_level);
                    console.log(append);
                    prepend_element(append,$('.content'));
                }
                /* Form */
                $('form').submit((e) => {
                    e.preventDefault();
                    var url = $('form').attr('action'),
                        data = $('form').serialize();
                    $.ajax({
                        url: url,
                        type: 'post',
                        data: data,
                        success: function(data) {
                            console.log(data);
                            if(data === 'login success') {
                                location.href = '/main';
                            }
                            else {
                                location.href = `/login/${data}`;
                            }
                        }
                    })
                })
                
            })
           
        </script>
    </body>
</html>